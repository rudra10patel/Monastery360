import{a as Q,b as h,c as n,d as V,h as s}from"/assets/chunks/chunk-SN6BMHBU.js";import{D as f,F as W,H as Z,N as l,O as x,P as w,o as r,p as g,v as c,x as i}from"/assets/chunks/chunk-DA6GEUWK.js";import{b as T,h as R$,j as e,q as m}from"/assets/chunks/chunk-ZTP2YUNO.js";var F=T(R$(),1);var y="/assets/assets/Rumtek monastery-LOXL53VQ.mp3";var z="/assets/assets/Enchey Monastery-LEHFMPGK.mp3";var q="/assets/assets/Tashiding Monastery-AAO7ISFP.mp3";var $$="/assets/assets/Pemayangtse Monastery-2DWHPZ4R.mp3";var A$="/assets/assets/Dubdi Monastery-OKZEWKVI.mp3";var B$="/assets/assets/Kartok Monastery-ZCCDRXV6.mp3";var D$="/assets/assets/Lingdum (Ranka) Monastery-3GY5VRCV.mp3";var C$="/assets/assets/Phodong Monastery-2WGMGVAQ.mp3";var F$="/assets/assets/Ralang Monastery-L3JT4AKC.mp3";var G$="/assets/assets/Do-Drul Chorten Stupa-MOFY5YEX.mp3";var $=T(e(),1),N=[{id:"1",title:"Rumtek Monastery",monastery:"Rumtek Monastery",duration:"45 min",language:"English",narrator:"Dr. Tenzin Norbu",description:"Explore the seat of the Karmapa lineage, featuring stunning Tibetan architecture, ancient murals, and the Golden Stupa containing relics of the 16th Karmapa.",type:"tour",offline:!0,premium:!1,audioFile:y},{id:"2",title:"Enchey Monastery",monastery:"Enchey Monastery",duration:"25 min",language:"English",narrator:"Lama Pemba",description:"Discover this 200-year-old monastery known for its unique Nyingma tradition, featuring beautiful prayer halls and panoramic views of Gangtok.",type:"tour",offline:!0,premium:!1,audioFile:z},{id:"3",title:"Tashiding Monastery",monastery:"Tashiding Monastery",duration:"35 min",language:"English",narrator:"Prof. Sangay Dolma",description:"Visit this sacred monastery perched on a hilltop, famous for its annual Bumchu festival and ancient Buddhist scriptures dating back centuries.",type:"tour",offline:!1,premium:!1,audioFile:q},{id:"4",title:"Pemayangtse Monastery",monastery:"Pemayangtse Monastery",duration:"60 min",language:"English",narrator:"Monastery Monks",description:"Experience the oldest monastery in Sikkim, featuring intricate wood carvings, ancient thangkas, and the famous Padmasambhava statue.",type:"tour",offline:!0,premium:!1,audioFile:$$},{id:"5",title:"Dubdi Monastery",monastery:"Dubdi Monastery",duration:"40 min",language:"English",narrator:"Elder Karma Lama",description:"Journey to the oldest monastery in Sikkim, built in 1701, featuring traditional Tibetan architecture and stunning mountain views.",type:"tour",offline:!0,premium:!1,audioFile:A$},{id:"6",title:"Kartok Monastery",monastery:"Kartok Monastery",duration:"30 min",language:"English",narrator:"Lama Dorje",description:"Explore this peaceful monastery known for its meditation retreats and beautiful garden setting, perfect for spiritual contemplation.",type:"tour",offline:!0,premium:!1,audioFile:B$},{id:"7",title:"Lingdum (Ranka) Monastery",monastery:"Lingdum (Ranka) Monastery",duration:"35 min",language:"English",narrator:"Rinpoche Tenzin",description:"Discover this modern monastery complex featuring traditional architecture, a large prayer hall, and educational facilities for Buddhist studies.",type:"tour",offline:!0,premium:!1,audioFile:D$},{id:"8",title:"Phodong Monastery",monastery:"Phodong Monastery",duration:"28 min",language:"English",narrator:"Lama Karma",description:"Visit this historic monastery known for its beautiful murals, ancient manuscripts, and the annual Chaam dance festival.",type:"tour",offline:!0,premium:!1,audioFile:C$},{id:"9",title:"Ralang Monastery",monastery:"Ralang Monastery",duration:"32 min",language:"English",narrator:"Lama Sangye",description:"Explore this magnificent monastery featuring stunning architecture, intricate artwork, and a peaceful atmosphere for meditation and prayer.",type:"tour",offline:!0,premium:!1,audioFile:F$},{id:"10",title:"Do-Drul Chorten Stupa",monastery:"Do-Drul Chorten Stupa",duration:"20 min",language:"English",narrator:"Lama Tashi",description:"Discover this sacred stupa built by the revered Buddhist master Dudjom Rinpoche, featuring beautiful architecture and spiritual significance.",type:"tour",offline:!0,premium:!1,audioFile:G$}],_$=()=>{var p,b;let[H,_]=(0,F.useState)(""),[K,M]=(0,F.useState)(null),[P,v]=(0,F.useState)(0),[O,E$]=(0,F.useState)(0),[a,H$]=(0,F.useState)({}),[t,d]=(0,F.useState)(null),[J,I]=(0,F.useState)(null),[j,K$]=(0,F.useState)(1),[X,k]=(0,F.useState)(!1),G=(0,F.useRef)(null),[J$]=m(),U=J$.get("monastery");(0,F.useEffect)(()=>{U&&_(U)},[U]);let S=N.filter(A=>H===""||A.title.toLowerCase().includes(H.toLowerCase())||A.monastery.toLowerCase().includes(H.toLowerCase())||A.description.toLowerCase().includes(H.toLowerCase())||A.narrator.toLowerCase().includes(H.toLowerCase())||A.language.toLowerCase().includes(H.toLowerCase())||A.type.toLowerCase().includes(H.toLowerCase())),M$=A=>{switch(A){case"tour":return"bg-monastery-gold/20 text-monastery-maroon dark:bg-sunrise/20 dark:text-sunrise";case"history":return"bg-mountain-blue/20 text-mountain-blue";case"meditation":return"bg-primary/20 text-primary";case"ceremony":return"bg-accent/20 text-accent";default:return"bg-muted text-muted-foreground"}},I$=A=>A.charAt(0).toUpperCase()+A.slice(1),u=(A,C)=>{if(K===A)G.current&&G.current.pause(),M(null),I(A);else if(J===A)G.current&&(G.current.play().catch(B=>{console.error("Error resuming audio:",B),M(null),I(null)}),M(A),I(null));else{G.current&&(G.current.pause(),G.current.currentTime=0);let B=new Audio(C);G.current=B,B.addEventListener("loadedmetadata",()=>{E$(B.duration)}),B.addEventListener("timeupdate",()=>{v(B.currentTime)}),B.addEventListener("ended",()=>{M(null),I(null),v(0)}),B.addEventListener("error",D=>{console.error("Audio playback error:",D),M(null),I(null)}),B.play().catch(D=>{console.error("Error playing audio:",D),M(null),I(null)}),M(A),I(null)}},Y=A=>{let C=Math.floor(A/60),B=Math.floor(A%60);return`${C}:${B.toString().padStart(2,"0")}`},L$=O>0?P/O*100:0;(0,F.useEffect)(()=>{(async()=>{let C={},B=N.map(async D=>{try{let E=new Audio(D.audioFile);return new Promise(L=>{let o=setTimeout(()=>{console.warn(`Timeout loading duration for ${D.title}, using fallback`),L({id:D.id,duration:R(D.duration)})},5e3);E.addEventListener("loadedmetadata",()=>{clearTimeout(o),L({id:D.id,duration:E.duration})}),E.addEventListener("error",Y$=>{clearTimeout(o),console.warn(`Error loading duration for ${D.title}:`,Y$),L({id:D.id,duration:R(D.duration)})}),E.load()})}catch(E){return console.warn(`Could not load duration for ${D.title}:`,E),{id:D.id,duration:R(D.duration)}}});try{(await Promise.all(B)).forEach(({id:E,duration:L})=>{C[E]=L}),H$(C)}catch(D){console.error("Error loading audio durations:",D)}})()},[]);let R=A=>{let C=A.match(/(\d+)\s*min/);return C?parseInt(C[1])*60:0},N$=A=>{let C=Math.floor(A/60),B=Math.floor(A%60);return C>0?B>0?`${C}m ${B}s`:`${C} min`:`${B} sec`},O$=async A=>{d(A.id);try{let C=await fetch(A.audioFile);if(!C.ok)throw new Error("Failed to fetch audio file");let B=await C.blob(),D=window.URL.createObjectURL(B),E=document.createElement("a");E.href=D;let L=`${A.monastery.replace(/[^a-zA-Z0-9]/g,"_")}_${A.title.replace(/[^a-zA-Z0-9]/g,"_")}.mp3`;E.download=L,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(D)}catch(C){console.error("Error downloading audio file:",C);try{let B=document.createElement("a");B.href=A.audioFile,B.download=`${A.monastery.replace(/[^a-zA-Z0-9]/g,"_")}_${A.title.replace(/[^a-zA-Z0-9]/g,"_")}.mp3`,document.body.appendChild(B),B.click(),document.body.removeChild(B)}catch(B){console.error("Fallback download failed:",B),window.open(A.audioFile,"_blank")}}finally{d(null)}},a$=A=>{K$(A),G.current&&(G.current.volume=A)},S$=()=>{G.current&&(X?(G.current.volume=j,k(!1)):(G.current.volume=0,k(!0)))};return(0,F.useEffect)(()=>{let A=C=>{if(C.code==="Space"&&(K||J)){C.preventDefault();let B=N.find(D=>D.id===(K||J));B&&u(B.id,B.audioFile)}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[K,J]),(0,F.useEffect)(()=>()=>{G.current&&(G.current.pause(),G.current=null),M(null),I(null)},[]),(0,$.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,$.jsx)(s,{}),(0,$.jsx)("section",{className:"pt-24 pb-8 bg-gradient-to-br from-monastery-gold/10 to-background dark:from-monastery-gold/20 dark:to-background",children:(0,$.jsx)("div",{className:"max-w-7xl mx-auto px-6",children:(0,$.jsxs)("div",{className:"text-center mb-8",children:[(0,$.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-6 text-foreground",children:(0,$.jsx)("span",{className:"bg-gradient-monastery bg-clip-text text-transparent",children:"Smart Audio Guides"})}),(0,$.jsx)("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Experience immersive audio guided tour covering architecture, history, and spiritual significance. Available in multiple languages with offline mode for remote monastery visits."})]})})}),(0,$.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8",children:[(0,$.jsx)("div",{className:"mb-8",children:(0,$.jsxs)("div",{className:"relative",children:[(0,$.jsx)(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,$.jsx)(h,{type:"text",placeholder:"Search audio guides by monastery, narrator, language, or type...",value:H,onChange:A=>_(A.target.value),className:"pl-10 pr-4 py-3 text-base"})]})}),(K||J)&&(0,$.jsx)("div",{className:"mb-8",children:(0,$.jsx)(n,{className:"p-4 bg-gradient-to-r from-monastery-gold/10 to-mountain-blue/10",children:(0,$.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$.jsx)("div",{className:"w-12 h-12 bg-monastery-gold/20 rounded-full flex items-center justify-center",children:(0,$.jsx)(x,{className:"w-6 h-6 text-monastery-gold"})}),(0,$.jsxs)("div",{children:[(0,$.jsx)("h3",{className:"font-semibold text-foreground",children:(p=N.find(A=>A.id===(K||J)))==null?void 0:p.title}),(0,$.jsx)("p",{className:"text-sm text-muted-foreground",children:(b=N.find(A=>A.id===(K||J)))==null?void 0:b.monastery})]})]}),(0,$.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$.jsx)(Q,{variant:"ghost",size:"sm",onClick:S$,children:X?(0,$.jsx)(w,{className:"w-4 h-4"}):(0,$.jsx)(l,{className:"w-4 h-4"})}),(0,$.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:X?0:j,onChange:A=>a$(parseFloat(A.target.value)),className:"w-20 h-2 bg-muted rounded-lg appearance-none cursor-pointer"})]}),(0,$.jsxs)("div",{className:"text-sm text-muted-foreground",children:[Y(P)," / ",Y(O||a[K||J||""]||0)]})]})]})})}),H&&(0,$.jsx)("div",{className:"mb-4",children:(0,$.jsxs)("p",{className:"text-sm text-muted-foreground",children:[S.length," audio guide",S.length!==1?"s":"",' found for "',H,'"']})}),S.length===0?(0,$.jsxs)("div",{className:"text-center py-12",children:[(0,$.jsx)(Z,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,$.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No audio guides found"}),(0,$.jsxs)("p",{className:"text-muted-foreground",children:['No results found for "',H,'". Try adjusting your search terms.']})]}):(0,$.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4 sm:gap-6",children:S.map(A=>(0,$.jsx)(n,{className:"overflow-hidden hover:shadow-peaceful transition-all duration-300",children:(0,$.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,$.jsxs)("div",{className:"flex justify-between items-start mb-4 gap-2",children:[(0,$.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$.jsx)("h3",{className:"text-base sm:text-lg font-bold text-foreground mb-2 truncate",children:A.title}),(0,$.jsxs)("div",{className:"flex items-center text-muted-foreground mb-2 text-sm",children:[(0,$.jsx)(i,{className:"w-4 h-4 mr-2 flex-shrink-0"}),(0,$.jsx)("span",{className:"truncate",children:A.monastery})]})]}),(0,$.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-2 flex-shrink-0",children:[(0,$.jsx)(V,{className:M$(A.type),children:I$(A.type)}),A.premium&&(0,$.jsx)(V,{variant:"secondary",className:"text-xs",children:"Premium"})]})]}),(0,$.jsx)("p",{className:"text-muted-foreground mb-4 text-sm",children:A.description}),(0,$.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-4 mb-4 text-sm",children:[(0,$.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,$.jsx)(r,{className:"w-4 h-4 mr-1"}),a[A.id]?N$(a[A.id]):(0,$.jsxs)("span",{className:"flex items-center",children:[(0,$.jsx)(c,{className:"w-3 h-3 mr-1 animate-spin"}),"Loading..."]})]}),(0,$.jsx)("div",{className:"text-muted-foreground",children:A.language}),(0,$.jsx)("div",{className:"flex items-center",children:A.offline&&(0,$.jsx)(V,{variant:"outline",className:"text-xs",children:"Offline Ready"})})]}),(0,$.jsxs)("div",{className:"flex items-center gap-3",children:[(0,$.jsx)(Q,{variant:"monastery",size:"sm",onClick:()=>u(A.id,A.audioFile),className:"flex-1",children:K===A.id?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(f,{className:"w-4 h-4 mr-2"}),"Pause"]}):J===A.id?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(W,{className:"w-4 h-4 mr-2"}),"Resume"]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(W,{className:"w-4 h-4 mr-2"}),A.premium?"Preview":"Play"]})}),(0,$.jsx)(Q,{variant:"outline",size:"sm",onClick:()=>O$(A),title:`Download ${A.title}`,disabled:t===A.id,children:t===A.id?(0,$.jsx)(c,{className:"w-4 h-4 animate-spin"}):(0,$.jsx)(g,{className:"w-4 h-4"})})]}),(K===A.id||J===A.id)&&(0,$.jsxs)("div",{className:"mt-4",children:[(0,$.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,$.jsx)("div",{className:"bg-monastery-gold h-2 rounded-full transition-all duration-300",style:{width:`${L$}%`}})}),(0,$.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,$.jsx)("span",{children:Y(P)}),(0,$.jsx)("span",{children:Y(O||a[A.id]||R(A.duration))})]})]})]})},A.id))})]})]})},F0=_$;export{_$ as AudioGuides,F0 as default};
//# sourceMappingURL=/assets/chunks/AudioGuides-U2PVFHNS.js.map
